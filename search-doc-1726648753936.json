{"searchDocs":[{"title":"👐 Creating a New Project","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Create a Project/create-new-project","content":"","keywords":"","version":"Next"},{"title":"Click on New Project​","type":1,"pageTitle":"👐 Creating a New Project","url":"/relational-migrator-lab/docs/Create a Project/create-new-project#click-on-new-project","content":"   ","version":"Next","tagName":"h2"},{"title":"Select an option​","type":1,"pageTitle":"👐 Creating a New Project","url":"/relational-migrator-lab/docs/Create a Project/create-new-project#select-an-option","content":" Click Connect to live databaseClick Load schema from a file if you NOT have access to a source database.   ","version":"Next","tagName":"h2"},{"title":"👐 Define Initial Schema","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Create a Project/define-initial-schema","content":"👐 Define Initial Schema Relational Migrator gives you three options on how your MongoDB schema should be created. Regardless of which option you choose, you can manually modify your schema later. Select “Start with a recommended MongoDB schema” You are asked which of the tables should represented as a collection in MongoDB. Select the five collections that we want: authorsbooksissue_detialsreviewsusers Any tables you did not check will be embedded in other collections. Click Next, then give your project a name.","keywords":"","version":"Next"},{"title":"👐 Select Tables","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Create a Project/select-tables","content":"👐 Select Tables We want to migrate data from all of the tables, so check all of them and then click Next.","keywords":"","version":"Next"},{"title":"📘 Desired Schema in MongoDB","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/desired-schema-mongodb","content":"📘 Desired Schema in MongoDB Since MongoDB is a document database, you have more flexibility in how you model your data. When migrating from a relational database to MongoDB, it's important to consider how your data is accessed, and model the data such that data that is frequently accessed together is stored together by using embedded documents and arrays. The following screenshot shows the MongoDB schema we will be creating in this lab. A few key points: books will contain an array of authors with author id and name for fast retrieval. This is using the Extended Reference Pattern to reference a separate Collection (Authors) but having in books enough information aubout the author.reviews are not included in the books collection as they can grow and become an unbounded array, an atipattern in Schema Design.an author can have several aliases, we just store those strings in an array.","keywords":"","version":"Next"},{"title":"👐 Connect Database","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Create a Project/connect-database","content":"","keywords":"","version":"Next"},{"title":"Select PostgreSQL as Database​","type":1,"pageTitle":"👐 Connect Database","url":"/relational-migrator-lab/docs/Create a Project/connect-database#select-postgresql-as-database","content":"   ","version":"Next","tagName":"h2"},{"title":"Enter connection details​","type":1,"pageTitle":"👐 Connect Database","url":"/relational-migrator-lab/docs/Create a Project/connect-database#enter-connection-details","content":" Enter the details for the PostgreSQL database you will be migrating from.  If your instructor has configured a server for you to use, ask them for the host name, username and password.If you followed the steps to configure PostgreSQL in a docker container, the hostname will be localhost, username postgres and password postgres.  Click Test Connection to ensure your details are correct.  Click Connect to proceed to the next step.   ","version":"Next","tagName":"h2"},{"title":"👐 Add mapping to issueDetails collection (from users table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/add-mapping-issue-detail-users","content":"👐 Add mapping to issueDetails collection (from users table) Now we want to store more details from each user into the collection tracking library loans. On the MongoDB diagram view, click the issueDetails collectionOn the relational mappings list on the right, click +AddSelect Embedded documentsSelect users as Source tableCheck the id and name fields and uncheck the restClick Save and close","keywords":"","version":"Next"},{"title":"👐 Add mapping to issueDetails collection (from books table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/add-mapping-books-issue-detail","content":"👐 Add mapping to issueDetails collection (from books table) Now we want to store more details from each book into the collection tracking library loans. On the MongoDB diagram view, click the issueDetails collectionOn the relational mappings list on the right, click +AddSelect Embedded documentsSelect books as Source tableCheck the id and title fields and uncheck the restClick Save and close ","keywords":"","version":"Next"},{"title":"👐 Add mapping to books collection (from authors table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/add-mapping-books-authors","content":"👐 Add mapping to books collection (from authors table) We want to modify the MongoDB schema so that each book contains an array of its authors. In this step we will embed the book details into the empty array from the join tabe. On the MongoDB diagram view, click the books collectionOn the relational mappings list on the right, click + AddSelect Embedded documentsSelect authors as Source tableIn the advanced settings, check 'Merge fields into parent`Check the id and name fields and uncheck the restClick Save and close","keywords":"","version":"Next"},{"title":"👐 Edit mapping to authors collection (from author_book table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/edit-mapping-authors-authorbook","content":"👐 Edit mapping to authors collection (from author_book table) We want to modify the authors collection to include an array of IDs representing their books. On the MongoDB diagram view, click the authors collectionOn the relational mappings list on the right, click on the edit icon of author_bookEdit the field name from authorBooks to just booksIn the list of fields, uncheck authorId, leaving bookId checkedIn the mapping rule's advanced settings, Check create array of primitive valuesClick Save and close","keywords":"","version":"Next"},{"title":"👐 Edit mapping to authors collection (from from author_alias table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/edit-mapping-authors-alias","content":"👐 Edit mapping to authors collection (from from author_alias table) We want to modify the MongoDB schema so that each author's aliases are represented as an array of strings. On the MongoDB diagram view, click the authors collectionOn the relational mappings list on the right, click on the edit icon of author_alias embedded array mapping ruleIn the list of fields, uncheck authorIdIn the mapping rule's advanced settings, Check create array of primitive valuesClick Save and close","keywords":"","version":"Next"},{"title":"👐 Add mapping to reviews collection (from users table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/add-mapping-reviews-user copy","content":"👐 Add mapping to reviews collection (from users table) We want to store each user's name against their reviews. On the MongoDB diagram view, click the reviews collectionOn the relational mappings list on the right, click +AddSelect Embedded documentsSelect users as Source tableIn the advanced settings check Merge fields into the parentOnly check name fieldClick Save and close ","keywords":"","version":"Next"},{"title":"👐 Edit mapping to books collection (from author_book table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/edit-mapping-books-author-book","content":"👐 Edit mapping to books collection (from author_book table) We want to modify the MongoDB schema so that each book contains an array of its authors. In this step we will remove the redundant ID fields from the join table. On the MongoDB diagram view, click the books collectionOn the relational mappings list on the right, click on the edit icon of author_bookEdit the field name from authorBooks to just authorsIn the list of fields, uncheck authorId and bookId, leaving all fields unchecked.Click Save and close","keywords":"","version":"Next"},{"title":"👐 Edit mapping to books collection (from book_attribute table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/edit-mapping-books-book-attribute","content":"👐 Edit mapping to books collection (from book_attribute table) We want to clean up the book_attributes array in our MongoDB schema. On the MongoDB diagram view, click the books collectionOn the relational mappings list on the right, click on the edit icon of book_attribute embedded array mapping rule.Change the Field name from bookAttributes to attributesUncheck bookIdClick Save and close","keywords":"","version":"Next"},{"title":"👐 Edit mapping to books collection (from book_genre table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/edit-mapping-books-book-genre","content":"👐 Edit mapping to books collection (from book_genre table) We want to modify the MongoDB schema so that each book's genres are represented as an array of strings. On the MongoDB diagram view, click the books collectionOn the relational mappings list on the right, click on the edit icon of book_genre embedded arrayChange the field name from bookGenres to genresUncheck bookIdIn the advanced settings, check create array of primitive valuesClick Save and close","keywords":"","version":"Next"},{"title":"👐 Edit mapping to issueDetails collection (from issue_details table)","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Edit Mapping Rules/edit-mapping-issue-detail-issue-detail","content":"👐 Edit mapping to issueDetails collection (from issue_details table) Now we want to remove some unncessary id fields from the issueDetails collection On the MongoDB diagram view, click the issueDetails collectionOn the relational mappings list on the right, click on the edit icon of issue_details New Documents mapping ruleUncheck the bookId and userId fields, and leave all other fields checked.Click Save and close","keywords":"","version":"Next"},{"title":"👐 Convert Views and Stored Procedures","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Generate code/convert-sprocs","content":"👐 Convert Views and Stored Procedures Relational Migrator can import and convert views and stored procedures to MongoDB Query Language, wrapped in your choice of programming langauge. This feature uses Artifical Intelligence and requires an Atlas account and internet connectivity. If needed, open Query Converter and sign in with your Atlas accountClick Manage database objectsEnter the details for your PostgreSQL server and click ConnectCheck all discovered Views and Stored Procedures and click SaveClick one of the imported views or stored proceduresSelect your preferred programming language and click Convert. After a while, the equivalent MongoDB query will be shown at the right of the page. Try some other queries and langauges!","keywords":"","version":"Next"},{"title":"👐 Convert SQL queries","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Generate code/convert-queries","content":"👐 Convert SQL queries Relational Migrator can help convert SQL queries to MongoDB Query Language, wrapped in your choice of programming langauge. This feature uses Artifical Intelligence and requires an Atlas account and internet connectivity. At the top, switch to Code Generation tabClick Query ConverterSign into with your MongoDB Atlas accountAccept the Query Converter licence termsClick Paste SQL queryIn the empty query, type SELECT * FROM books WHERE &quot;bookOfTheMonth&quot; = true AND pages &gt; 500Leave the language as JavaScript and click Convert. After a while, the equivalent MongoDB query will be shown at the right of the page.","keywords":"","version":"Next"},{"title":"👐 Run a Snapshot Migration Job","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Migrate Data/migration","content":"👐 Run a Snapshot Migration Job At the top, switch to Data Migration tab Click create sync jobSpecify source DB connection details The details will be populated from when you created the project. Specify MongoDB connection details Enter the URI, database, username and password for your MongoDB clusterIf you are using Atlas, you can retrieve the details from the Atlas portal Specify migration options Choose the Drop destination collections before migration option Read migration summary to confirm detailsRun StartMonitor the progress of the job","keywords":"","version":"Next"},{"title":"👐 Generate app code","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Generate code/generate-app-code","content":"👐 Generate app code Relational Migrator allows you to generate application code in a variety of languges, dervied from your MongoDB schema definition. While this code is not production-ready, it can save developers significant time compared to creating entity classes by hand. At the top, switch to Code Generation tabUnder Language, select C#Under Template, select Persistence LayerClick each of the collections in the list. Notice the tabs containing entity classes and CRUD helpers for each collection or embedded object.Under Language, select `JSON'Under Template, select Sample Documents. Notice how you can view examples of how data in each collection will be structured.Under Template, select JSON Schema (MongoDB). Notice how you can view and download JSON Schema validators which could be used to enforce schema compliance.","keywords":"","version":"Next"},{"title":"📘 Introduction","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/intro","content":"📘 Introduction Workshop goals\tMigrate a Relational DB into MongoDB AtlasWhat you'll learn\t- What is the MongoDB Relational Migrator - How to install it - Importing a Relational DB: import the Schema - Map the relational schema to a MongoDB schema - Migrate the data to MongoDB Prerequisites\tSee Prerequisites Time to complete\t1 hour These labs are meant to be presented by one of our amazing instructors, but you can also do them on your own. In the navigation bar, you will notice some icons. Here is their meaning: Icon\tMeaning📘\tLecture material - If you're following along in an instructor lead session, they probably have covered this already. 👐\tHands-on content - Get ready to get some work done. You should follow these steps. 🦸\tAdvanced content - This content isn't covered during the lab, but if you're interested in learning more, you can check it out.","keywords":"","version":"Next"},{"title":"👐 View Migrated Data","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/Migrate Data/view-migrated-data","content":"👐 View Migrated Data Once the job has finished, you can view it in MongoDB. You can perform this task using the mongosh command line tool, MongoDB Compass, or MongoDB Atlas. This topic assumes you have migrated your data to MongoDB Atlas. In a web browser, navigate to the MongoDB Atlas portal and sign in with your accountNavigate to the cloud project containing the cluster you migrated data toSelect your cluster and click View collectionsSelect the database you migrated data toSelect each of the collections and view the documents, confirming they conform to the schema you created.","keywords":"","version":"Next"},{"title":"📘 Schema in PostgreSQL","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/schema-in-postgresql","content":"📘 Schema in PostgreSQL The following screenshot shows an Entity-Relationship diagram of the relational database we wish to migrate. This is a Library management app, that stores information about Books, where a Book can have many Authors, an Author can write many books, users can borrow books and leave reviews. This is the sample schema we use during our Developer Days's Intro Lab.","keywords":"","version":"Next"},{"title":"👐 Project Settings","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/project-settings","content":"👐 Project Settings On the top left, click settings iconSelect single inherited primary key. This detects the primary key from the relational schema and sets them as the _id in MongoDBOptionally, toggle Suggested Mappings on and off.","keywords":"","version":"Next"},{"title":"🎯 Summary","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/summary","content":"🎯 Summary Congratulations! Following this tutorial, you have successfully: Installed Relational MigratorCreated a migration projectMapped a relational schema to MongoDBMigrated data to MongoDBGenerated application code from the MongoDB modelConverted SQL queries and stored procedures to MongoDB query language. Visit the MongoDB Developer Center for more useful information and tutorials.","keywords":"","version":"Next"},{"title":"👐 Toggle View","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/toggle-view","content":"👐 Toggle View At the bottom left, toggle between different views, we should be looking at the MDB view most of the time.","keywords":"","version":"Next"},{"title":"👐 Prerequisites","type":0,"sectionRef":"#","url":"/relational-migrator-lab/docs/prerequisites","content":"","keywords":"","version":"Next"},{"title":"1. PostgreSQL Database​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#1-postgresql-database","content":" In this lab you will be migrating data from a PostgreSQL relational database. You have a few options to set up this database.  ","version":"Next","tagName":"h2"},{"title":"Option 1: Use pre-configured database​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-1-use-pre-configured-database","content":" If you are participating in an instructor-led lab, they may have already set up this database for you. Ask your instructor for the connection URI and credentials.  ","version":"Next","tagName":"h3"},{"title":"Option 2: Load the schema and data into your own PostgreSQL server​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-2-load-the-schema-and-data-into-your-own-postgresql-server","content":" If you already have a PostgreSQL server set up, you can import the schema and data used in this lab. Download the file1-library-schema-and-data.sqlfile and load it using psql or pgAdmin.  ","version":"Next","tagName":"h3"},{"title":"Option 3: Run a PostgreSQL container using Docker​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-3-run-a-postgresql-container-using-docker","content":" If you don't have an existing PostgreSQL server but have Docker installed, you can easily load a container pre-configured with PostgreSQL and the sample database:  Clone or download the code from this lab's Github repo.Open a terminal window and navigate to the repo rootBuild the Docker image by running the command:  docker build -f ./docker/sample-postgres-library/Dockerfile -t sample-postgres-library .   Start the Docker container by running the command:  docker run -p 5432:5432 sample-postgres-library   The PostgreSQL server can be accessed at localhost:5432 with a username of postgres and a password of postgres.  ","version":"Next","tagName":"h3"},{"title":"Option 4: Load an SQL file​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-4-load-an-sql-file","content":" Choose this option if you just want a quick hands-on experience and you don't need to run actual migration. Download the file library-schema.sqland upload this file later on at the create a project step. However, you will not be able to perform an actual migration if you not have a source database.  ","version":"Next","tagName":"h3"},{"title":"2. MongoDB Database​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#2-mongodb-database","content":" As we'll be importing data from a Relational Database into MongoDB, you'll need to have a MongoDB database. You have a few options to set up this database.  ","version":"Next","tagName":"h2"},{"title":"Option 1: New MongoDB Atlas cluster​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-1-new-mongodb-atlas-cluster","content":" The easiest way to run MongoDB is to use MongoDB Atlas, our cloud-hosted database offering. You can set a MongoDB Atlas account and a free forever M0 Cluster.  To get yours, follow the instructions on the Intro Lab:  Create your AccountDeploy a Database Cluster  Be sure to open up the cluster to allow connections from your local computer, and configure a database user with the readWriteAnyDatabase role.  ","version":"Next","tagName":"h3"},{"title":"Option 2: Use existing cluster​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-2-use-existing-cluster","content":" If you have an existing MongoDB Atlas, Enterprise or Community cluster, you can use it as the migration target. Make sure you know the URI for the cluster, and have a database user with the readWriteAnyDatabase role.  ","version":"Next","tagName":"h3"},{"title":"Option 3: Run a MongoDB container using Docker​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#option-3-run-a-mongodb-container-using-docker","content":" If you don't have an existing PostgreSQL server but have Docker installed, you can easily load a container pre-configured with MongoDB by running the following command:  docker run -p 27017:27017 mongo   This will launch an empty MongoDB community cluster on localhost:27017, suitable to use for this lab. You can connect with no username or password. Since this command does not use Docker volumes, any data will be lost when the container is stopped.  ","version":"Next","tagName":"h3"},{"title":"3. Download and install MongoDB Relational Migrator​","type":1,"pageTitle":"👐 Prerequisites","url":"/relational-migrator-lab/docs/prerequisites#3-download-and-install-mongodb-relational-migrator","content":" Now you will need to go to the MongoDB Relational Migrator downloads page, select your OS, download and install it. Once installed, run it and it will be running on a browser at http://127.0.0.1:8278/. ","version":"Next","tagName":"h2"}],"options":{"id":"default"}}