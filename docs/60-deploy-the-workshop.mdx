# ðŸ“¦ Deploying the workshop

## Building/testing it

`npm start` builds a development version of the Docusaurus workshop. To build the production version locally we should use `npm run build` that also checks links. 

It will create a `build` directory. This is a generated static version of the workshop we can host anywhere. This directory is ignored by git.

The Search Box only works with a production build.


## Setting up Github pages

- to be able to use GH Pages, the repo has to be public
    - if it's private go to repo settings > Danger Zone > Change repository visibility and make it public.
- in the `deploy.yml`GH Action file we use `GH_TOKEN`. 
    - we need to create a Github Token with some permissions. Open your [profile settings](https://github.com/settings/profile) > Developer Settings > Personal Access Tokens > Fine-grained personal access tokens.
        - restrict this token to the repo containing the workshop (Repository Access > Only select repositories)
        - Repository permissions: Actions, Contents, Deployments, Pages and Workflows, all R/W
    - We need to go to the repo settings > Secrets and variables > Actions and add a new Secret pasting there the token we just created
- The 1st time the GH has failed running as the token wasn't there. Re-run the GH Action so it finshes successfully. It will create a gh-pages branch in the repo, so you know it worked.
- If you changed the `workshopName` in `docusaurus.config.js` everything should work.

## Github Actions

In `./github/workflows` there's a Github action to automatically deploy this site in Github pages. You just need to push changes to `main` and everything should happen automagically.